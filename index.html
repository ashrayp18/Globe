<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interactive Globe</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }
    #globeViz {
      width: 100%;
      height: 100%;
    }
  </style>
  <script src="https://unpkg.com/three@0.150.1/build/three.min.js"></script>
  <script src="https://unpkg.com/globe.gl"></script>
</head>
<body>
  <div id="globeViz"></div>
  <script>
    const locations = [
      { lat: 37.7749, lng: -122.4194, name: 'United States' },
      { lat: 51.5074, lng: -0.1278, name: 'United Kingdom' },
      { lat: 25.2048, lng: 55.2708, name: 'United Arab Emirates' },
      { lat: 28.6139, lng: 77.2090, name: 'India' },
      { lat: -25.2744, lng: 133.7751, name: 'Australia' } // Added Australia
    ];

    const world = Globe()(document.getElementById('globeViz'))
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
      .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')
      .backgroundColor('#000000');

    world.controls().autoRotate = true;
    world.controls().autoRotateSpeed = 0.6;

    // Load globe first, then add pins
    world.onGlobeReady(() => {
      const globeRadius = world.getGlobeRadius();
      const spriteMap = new THREE.TextureLoader().load('https://cdn-icons-png.flaticon.com/512/684/684908.png');
      const spriteMaterial = new THREE.SpriteMaterial({ map: spriteMap, color: 0xffffff });

      locations.forEach(loc => {
        const sprite = new THREE.Sprite(spriteMaterial.clone());
        sprite.scale.set(0.5, 0.5, 1); // Adjust size here
        const phi = (90 - loc.lat) * (Math.PI / 180);
        const theta = (loc.lng + 180) * (Math.PI / 180);
        sprite.position.setFromSphericalCoords(globeRadius + 1, phi, theta);
        world.scene().add(sprite);
      });
    });
  </script>
</body>
</html>
